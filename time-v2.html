<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HOG Scheduled Timer</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: linear-gradient(to right, #5f92ff, #feb47b);
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        overflow: hidden; /* Prevent overflow caused by scaling */
      }
      .zoom-container {
        transform: scale(1.5); /* Scale the content to 150% */
        transform-origin: top left; /* Start scaling from the top left */
      }
      .timer-container {
        background: rgba(25, 0, 247, 0.7);
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 8px 16px rgba(36, 0, 238, 0.3);
      }
      .timer {
        display: flex;
        justify-content: center;
        font-size: 3rem;
      }
      .timer span {
        font-size: 3rem;
      }
      .timer-container.red {
        background: linear-gradient(to right, #ff4b1f, #ff416c);
      }
    </style>
  </head>
  <body>
    <div class="zoom-container">
      <div class="timer-container text-center" id="timerContainer">
        <h1 class="mb-4" id="segmentTitle">Welcome</h1>
        <hr />
        <div class="timer">
          <span id="time">00:00</span>
        </div>
        <div
          id="timePassed"
          style="display: none; font-size: 1.5rem; margin-top: 20px"
        ></div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Schedule array with a 20-minute break before the "Word" session
      const schedule = [
        { name: "Welcome", duration: 10 },
        { name: "Grace News", duration: 10 },
        { name: "Special Ministration", duration: 5 },
        { name: "Sunday School", duration: 5 },
        { name: "Offertory", duration: 10 },
        { name: "Special Ministration", duration: 5 },
        { name: "Break", duration: 20 }, // 20-minute break added here
        { name: "Word", duration: 60 },
      ];

      let currentSegmentIndex = 0; // Index of the current segment in the schedule array
      let timerInterval;

      function startSegment(segment) {
        // Set the segment title and initialize timer
        document.getElementById("segmentTitle").textContent = segment.name;
        let timeLeft = segment.duration * 60 * 1000; // Convert minutes to milliseconds
        const endTime = new Date().getTime() + timeLeft;

        clearInterval(timerInterval); // Clear any existing timer

        // Update the countdown every second
        timerInterval = setInterval(() => {
          const now = new Date().getTime();
          timeLeft = endTime - now;

          if (timeLeft >= 0) {
            // Calculate remaining minutes and seconds
            const minutes = Math.floor(
              (timeLeft % (1000 * 60 * 60)) / (1000 * 60)
            );
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

            // Format and display the time
            document.getElementById("time").innerHTML =
              String(minutes).padStart(2, "0") +
              ":" +
              String(seconds).padStart(2, "0");

            // Change background color if less than 1 minute is remaining
            const timerContainer = document.getElementById("timerContainer");
            if (minutes === 0 && seconds < 60) {
              timerContainer.classList.add("red");
            } else {
              timerContainer.classList.remove("red");
            }
          } else {
            // Move to the next segment
            clearInterval(timerInterval);
            currentSegmentIndex++;
            if (currentSegmentIndex < schedule.length) {
              startSegment(schedule[currentSegmentIndex]);
            } else {
              document.getElementById("segmentTitle").textContent =
                "Service Completed";
              document.getElementById("time").textContent = "00:00";
            }
          }
        }, 1000);
      }

      // Start the first segment when the page loads
      window.onload = () => startSegment(schedule[currentSegmentIndex]);
    </script>
  </body>
</html>
